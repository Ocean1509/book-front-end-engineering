<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><title>Document</title></head><body><div class="container"><p><button type="button" class="btn btn-success" id="create"><a href="/create">新建</a></button></p><table class="table"><tr>{% for t in titles %}<th>{{t}}</th>{% endfor %}</tr>{% for data in lists %}<tr><td>{{data.id}}</td><td>{{data.name}}</td><td>{{data.author}}</td><td>{{data.isbn}}</td><td>{{data.price}}</td><td>{{data.memo}}</td><td>{{data.create_date}}</td><td><button type="button" class="btn btn-success edit" data-id="{{data.id}}">编辑</button><button type="button" class="btn btn-danger delete" data-id="{{data.id}}">删除</button><p></p></td></tr>{% endfor %}</table></div><script src="https://cdn.bootcss.com/jquery/3.5.0/jquery.min.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/jquery.pjax/2.0.1/jquery.pjax.js"></script><script>$(document).pjax("a", ".container")
    $(document).ready(function () {
    //   $('#create').click(function () {
    //     location.href = '/create'
    //   })
      $('.edit').click(function () {
        let id = $(this).attr('data-id')
        location.href = `/create/${id}`
      })
      $('.delete').click(function () {
        let id = $(this).attr('data-id');
        $.ajax({
          url: '/book',
          method: 'delete',
          data: {
            id
          },
          dataType: "json",
          success(res) {
            if (res.success) {
              location.href = `/list`
            }
          },
          error(e) {
            console.log(e)
          }
        })
      })
<<<<<<< HEAD
    })
  </script> -->
  {% block scripts %}
  <script src="../../script/runtime.bundle.js"></script><script src="../../script/index.bundle.js"></script>
  {% endblock %}
</body>

</html>
=======
    })</script></body></html>
>>>>>>> cb0431b1ece6127b403c8af87862d8b38564f24a
